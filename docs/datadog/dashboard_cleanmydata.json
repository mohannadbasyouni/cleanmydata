{
  "title": "CleanMyData Pipeline Dashboard",
  "description": "Demo-ready dashboard for AI-assisted data cleaning with full observability",
  "widgets": [
    {
      "id": 1,
      "definition": {
        "type": "timeseries",
        "title": "Request Rate",
        "requests": [
          {
            "q": "sum:cleanmydata.requests_total{service:cleanmydata-api}.as_rate()",
            "display_type": "line"
          }
        ],
        "yaxis": {
          "label": "requests/sec"
        }
      },
      "layout": {
        "x": 0,
        "y": 0,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 2,
      "definition": {
        "type": "timeseries",
        "title": "Error Rate",
        "requests": [
          {
            "q": "sum:cleanmydata.requests_failed_total{service:cleanmydata-api}.as_rate()",
            "display_type": "line",
            "style": {
              "palette": "red"
            }
          }
        ],
        "yaxis": {
          "label": "errors/sec"
        }
      },
      "layout": {
        "x": 16,
        "y": 0,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 3,
      "definition": {
        "type": "timeseries",
        "title": "P95 Latency",
        "requests": [
          {
            "q": "p95:cleanmydata.duration_ms{service:cleanmydata-api}",
            "display_type": "line"
          }
        ],
        "yaxis": {
          "label": "ms"
        }
      },
      "layout": {
        "x": 32,
        "y": 0,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 4,
      "definition": {
        "type": "timeseries",
        "title": "Duplicates Removed (Last 24h)",
        "requests": [
          {
            "q": "sum:cleanmydata.duplicates_removed{service:cleanmydata-api}",
            "display_type": "bars"
          }
        ],
        "yaxis": {
          "label": "count"
        }
      },
      "layout": {
        "x": 0,
        "y": 8,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 5,
      "definition": {
        "type": "timeseries",
        "title": "Outliers Handled (Last 24h)",
        "requests": [
          {
            "q": "sum:cleanmydata.outliers_handled{service:cleanmydata-api}",
            "display_type": "bars"
          }
        ],
        "yaxis": {
          "label": "count"
        }
      },
      "layout": {
        "x": 16,
        "y": 8,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 6,
      "definition": {
        "type": "timeseries",
        "title": "Missing Values Filled (Last 24h)",
        "requests": [
          {
            "q": "sum:cleanmydata.missing_filled{service:cleanmydata-api}",
            "display_type": "bars"
          }
        ],
        "yaxis": {
          "label": "count"
        }
      },
      "layout": {
        "x": 32,
        "y": 8,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 7,
      "definition": {
        "type": "query_value",
        "title": "Rows Processed (Total)",
        "requests": [
          {
            "q": "sum:cleanmydata.rows_processed{service:cleanmydata-api}",
            "aggregator": "last"
          }
        ],
        "precision": 0
      },
      "layout": {
        "x": 0,
        "y": 16,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 8,
      "definition": {
        "type": "timeseries",
        "title": "Gemini API Latency",
        "requests": [
          {
            "q": "avg:cleanmydata.gemini.latency_ms{service:cleanmydata-api}",
            "display_type": "line"
          },
          {
            "q": "p95:cleanmydata.gemini.latency_ms{service:cleanmydata-api}",
            "display_type": "line"
          }
        ],
        "yaxis": {
          "label": "ms"
        },
        "legend": {
          "show_legend": true,
          "legend_size": "0"
        }
      },
      "layout": {
        "x": 16,
        "y": 16,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 9,
      "definition": {
        "type": "timeseries",
        "title": "Suggestions Generated by Category",
        "requests": [
          {
            "q": "sum:cleanmydata.gemini.suggestions_count{service:cleanmydata-api,status:success}.as_rate() by {category}",
            "display_type": "line"
          }
        ],
        "yaxis": {
          "label": "suggestions/sec"
        }
      },
      "layout": {
        "x": 32,
        "y": 16,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 10,
      "definition": {
        "type": "query_value",
        "title": "AI Call Success Rate",
        "requests": [
          {
            "q": "sum:cleanmydata.gemini.calls{service:cleanmydata-api,status:success}.as_rate() / sum:cleanmydata.gemini.calls{service:cleanmydata-api}.as_rate() * 100",
            "aggregator": "last"
          }
        ],
        "precision": 1,
        "custom_unit": "%"
      },
      "layout": {
        "x": 0,
        "y": 24,
        "width": 16,
        "height": 8
      }
    },
    {
      "id": 11,
      "definition": {
        "type": "note",
        "content": "## APM Traces\n\nView live traces in [APM Service Map](https://app.datadoghq.com/apm/service-map) for service `cleanmydata-api`.\n\nKey trace operations:\n- `cleaning.pipeline` (parent span)\n- `cleaning.remove_duplicates`\n- `cleaning.normalize_columns`\n- `cleaning.clean_text`\n- `cleaning.standardize_formats`\n- `cleaning.handle_outliers`\n- `cleaning.fill_missing`\n- `cleanmydata.ai.gemini_analyze`\n\n## Log Explorer\n\nQuery structured logs:\n```\nservice:cleanmydata-api\n```\n\nFilter by job_id:\n```\nservice:cleanmydata-api job_id:abc123\n```\n\nView Gemini analysis:\n```\nservice:cleanmydata-api gemini_analysis_completed\n```"
      },
      "layout": {
        "x": 16,
        "y": 24,
        "width": 32,
        "height": 8
      }
    }
  ],
  "template_variables": [
    {
      "name": "service",
      "prefix": "service",
      "available_values": ["cleanmydata-api"],
      "default": "cleanmydata-api"
    },
    {
      "name": "env",
      "prefix": "env",
      "available_values": ["dev", "staging", "prod"],
      "default": "prod"
    }
  ],
  "layout_type": "free",
  "is_read_only": false,
  "notify_list": []
}
